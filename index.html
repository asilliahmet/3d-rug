<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="./UIscript.js" defer></script>

    <link rel="stylesheet" href="./rotateButtonComponent/rotateBtn.css">
    <script src="./rotateButtonComponent/rotateBtn.js" defer></script>

    <link rel="stylesheet" href="./pauseResumeBtn/pauseResumeBtn.css">
    <script src="./pauseResumeBtn/pauseResumeBtn.js" defer></script>
    
    <style>
        body{
            display: flex;
            overflow: hidden;
            margin: 0px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 95vh;
        }
        #appcontainer{
            width: min(100vw, 100vh);
            height: min(100vw, 100vh);
            border: 1px solid green;
            overflow: hidden;
            position: relative;
        }
        a-scene, #videoBackground, #touchoverlay, .screenShotCanvas{
            position: absolute;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
        }
        #touchoverlay{
            /* background-color: rgba(255, 0, 0, 1); */
            z-index: 999;
        }
        .screenShotCanvas{
            z-index: 99;
        }
        #videoBackground{
            object-fit: cover;
        }
        #bottomui{
            position: relative;
            z-index: 5;
            top: 20px;
            width: 100vw;
            display: flex;
            justify-content: space-around;
        }
        #rotateDiv{
            background-color: aqua;
        }
    </style>
</head>
<body>
    <div>MAJOLIKA EVIMDE GOR, ALPHA TEST VERSIYON</div>
    <div id="log"></div>
    <div id="appcontainer">
        <!-- <canvas id="screenShotCanvas"></canvas> -->
        <div id="touchoverlay"></div>
        <video id="videoBackground" playsinline></video>
        <!-- embedded -->
        <a-scene embedded transparent="true">
            <a-camera touchEnabled="false" fov="60"></a-camera>

            <!-- the rug -->
            <a-box 
            id="therug"
            scale="1.5 1 1.5"
            style="z-index: 2;"
            src="./Images/BOHEM - BH04A.png"
            position="0 1 0" 
            normal-map="./Images/Fabric_Rug_006_normal.jpg"
            normal-texture-repeat="10 20"
            roughness="0.8"
            rotation="0 90 0"
            width="0.8" height="0.01" depth="1.5">
    
                <!-- depth overlock 1 -->
                <a-cylinder   
                src="./Images/Fabric_Knitted_002_COLOR.jpg"
                normal-map="./Images/normalmap2.png"
                normal-texture-repeat="1 40"
                repeat="1 40"
                color="#c7bfb9"
                roughness="0.4"
    
                height="1.507" radius="0.007"
                rotation="90 0 0"
                position="0.4 0 0"
                scale="1.1 1 0.7"
                ></a-cylinder>
    
                <!-- depth overlock 2 -->
                <a-cylinder
                src="./Images/Fabric_Knitted_002_COLOR.jpg"
                normal-map="./Images/normalmap2.png"
                normal-texture-repeat="1 40"
                repeat="1 40"
                color="#c7bfb9"
                roughness="0.4"
    
                height="1.507" radius="0.007"
                rotation="90 0 0"
                position="-0.4 0 0"
                scale="1.1 1 0.7"
                ></a-cylinder>
    
                <!-- width overlock 1 -->
                <a-cylinder
                src="./Images/Fabric_Knitted_002_COLOR.jpg"
                normal-map="./Images/normalmap2.png"
                normal-texture-repeat="1 20"
                repeat="1 20"
                color="#c7bfb9"
                roughness="0.4"
    
                height="0.807" radius="0.007"
                rotation="0 0 90"
                position="0 0 0.75"
                scale="0.7 1 1.1"
                
                ></a-cylinder>
    
                <!-- width overlock 2 -->
                <a-cylinder
                src="./Images/Fabric_Knitted_002_COLOR.jpg"
                normal-map="./Images/normalmap2.png"
                normal-texture-repeat="1 20"
                repeat="1 20"
                color="#c7bfb9"
                roughness="0.4"
    
                height="0.807" radius="0.007"
                rotation="0 0 90"
                position="0 0 -0.75"
                scale="0.7 1 1.1"
                ></a-cylinder>
            </a-box>
        </a-scene>
    </div>
    <div id="bottomui">
        <button onclick="takeScreenShot()">Screenshot</button>
        <div class="pause-resume-btn" style="width: 100px; height: 100px;"><i class="click-to-pause"></i></div>
        <div class="rotateBtn" style="width: 100px; height: 100px;"><i></i></div>
    </div>
</body>
<script>
    let videoBackground = document.querySelector('#videoBackground');
    //{facingMode: { exact: "environment" }}
    navigator.mediaDevices.getUserMedia({ video: {facingMode: { ideal: "environment" }}, audio: false })
      .then((stream) => {
        videoBackground.srcObject = stream;
        videoBackground.play();
      })
      .catch((error) => {
        console.log(error);
      });
</script>
</html>
